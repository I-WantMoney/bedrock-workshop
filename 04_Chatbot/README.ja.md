# ラボ 4 - ChatBot (会話型インターフェイス)

## 概要

チャットボットやバーチャルアシスタントなどの会話型インターフェースを使用して、顧客のユーザーエクスペリエンスを向上させることができます。チャットボットは、自然言語処理 (NLP) と機械学習アルゴリズムを使用してユーザーのクエリを理解し、それに応答します。チャットボットは、顧客サービス、営業、電子商取引などのさまざまなアプリケーションで使用でき、ユーザーに迅速かつ効率的に対応できます。Web サイト、ソーシャルメディアプラットフォーム、メッセージングアプリなど、さまざまなチャネルからアクセスできます。

## Amazon Bedrock を使用するチャットボット

![Amazon Bedrock - Conversational Interface](./images/chatbot_bedrock.png)

## ユースケース

1. **チャットボット(基本)** -  FM モデルの Zero-Shot チャットボット
2. **プロンプトテンプレートを使用したチャットボット** - プロンプトテンプレートにコンテキストが提供されているチャットボット
3. **ペルソナチャットボット** - 役割が定義されたチャットボット。例：キャリアコーチとヒューマンインタラクション
4. **コンテキストを意識したチャットボット** - 埋め込み生成による外部ファイルを利用したコンテキストを意識したチャットボット

## Amazon Bedrock でチャットボットを構築するための LangChain フレームワーク

チャットボットのような会話型インターフェースでは、短期的にも長期的にも、以前のやりとりを覚えておくことが非常に重要です。

LangChain は2つの形式のメモリコンポーネントを提供します。まず、LangChain には以前のチャットメッセージを管理および操作するためのヘルパーユーティリティが用意されています。これらはモジュール式で、使用方法に関係なく便利に使えるように設計されています。次に、LangChain はこれらのユーティリティをチェーンに組み込む簡単な方法を提供しています。
さまざまなタイプの抽象化を簡単に定義して操作できるため、強力なチャットボットを簡単に構築できます。

## コンテキストを活用したチャットボットの構築-主な要素

コンテキストを意識したチャットボットを構築する最初のプロセスは、コンテキストを **generate embeddings** にすることです。通常は、埋め込み (Embedding) モデル全体を通して埋め込みを生成する取り込みプロセスを経て、一種のベクトルストアに格納されます。この例では、GPT-J 埋め込みモデルを使用しています。

![Embeddings](./images/embeddings_lang.png)

2 番目のプロセスは、ユーザーリクエストのオーケストレーション、インタラクション、結果の呼び出しと返却です。

![Chatbot](./images/chatbot_lang.png)

## アーキテクチャ [コンテキストを意識したチャットボット]

![4](./images/context-aware-chatbot.png)

このアーキテクチャでは:

1.  LLMに尋ねられた質問は、埋め込みモデルにまで及ぶ
2.  コンテキストドキュメントは [Amazon Titan Embeddings モデル](https://aws.amazon.com/bedrock/titan/) を使用して埋め込まれ、ベクトルデータベースに保存される
3.  次に、埋め込まれたテキストが FM に入力され、コンテキスト検索とチャット履歴が含まれる
4.  その後、FM モデルはコンテキストに基づいて結果を表示する

## ノートブック

このモジュールは、同じパターンのノートブックを2冊提供します。Amazon Titan Text Large だけでなく、Anthropic Claude, AI21 Labs Jurassic との会話も体験でき、それぞれのモデルの会話力を体感できます。

1.  [Claude を使用したチャットボット](./00_Chatbot_Claude.ja.ipynb)
1.  [Titan を使用したチャットボット](./00_Chatbot_Titan.jp.ipynb)
1.  [Jurassic を使用したチャットボット](./00_Chatbot_AI21.jp.ipynb)
